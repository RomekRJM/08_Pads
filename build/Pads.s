;
; File generated by cc65 v 2.19 - Git c3d7a90
;
	.fopt		compiler,"cc65 v 2.19 - Git c3d7a90"
	.setcpu		"6502"
	.smart		on
	.autoimport	on
	.case		on
	.debuginfo	on
	.importzp	sp, sreg, regsave, regbank
	.importzp	tmp1, tmp2, tmp3, tmp4, ptr1, ptr2, ptr3, ptr4
	.macpack	longbranch
	.dbg		file, "pads.c", 1695, 1643084069
	.dbg		file, "lib/neslib.h", 9271, 1642938971
	.dbg		file, "lib/nesdoug.h", 6862, 1642938971
	.dbg		file, "sprites.h", 1659, 1642945136
	.dbg		file, "lungs.h", 586, 1642942743
	.dbg		file, "math.h", 187, 1643086901
	.forceimport	__STARTUP__
	.dbg		sym, "pal_bg", "00", extern, "_pal_bg"
	.dbg		sym, "pal_spr", "00", extern, "_pal_spr"
	.dbg		sym, "ppu_wait_nmi", "00", extern, "_ppu_wait_nmi"
	.dbg		sym, "ppu_off", "00", extern, "_ppu_off"
	.dbg		sym, "ppu_on_all", "00", extern, "_ppu_on_all"
	.dbg		sym, "oam_meta_spr", "00", extern, "_oam_meta_spr"
	.dbg		sym, "bank_spr", "00", extern, "_bank_spr"
	.dbg		sym, "vram_adr", "00", extern, "_vram_adr"
	.dbg		sym, "vram_unrle", "00", extern, "_vram_unrle"
	.dbg		sym, "get_frame_count", "00", extern, "_get_frame_count"
	.dbg		sym, "virusPath", "00", extern, "_virusPath"
	.import		_pal_bg
	.import		_pal_spr
	.import		_ppu_wait_nmi
	.import		_ppu_off
	.import		_ppu_on_all
	.import		_oam_meta_spr
	.import		_bank_spr
	.import		_vram_adr
	.import		_vram_unrle
	.import		_get_frame_count
	.export		_virus
	.export		_lungs
	.import		_virusPath
	.export		_virusCoordinates
	.export		_initialVirusCoordinates
	.export		_dbg1
	.export		_dbg2
	.export		_dbg3
	.export		_paletteBackground
	.export		_paletteSprite
	.export		_draw_sprites
	.export		_movement
	.export		_main

.segment	"DATA"

_virusCoordinates:
	.word	$0000
	.word	$0000
_initialVirusCoordinates:
	.word	$001A
	.word	$000A
_dbg1:
	.word	$0080
_dbg2:
	.word	$0081
_dbg3:
	.word	$0082

.segment	"RODATA"

_virus:
	.byte	$00
	.byte	$00
	.byte	$80
	.byte	$00
	.byte	$08
	.byte	$00
	.byte	$81
	.byte	$00
	.byte	$10
	.byte	$00
	.byte	$82
	.byte	$00
	.byte	$18
	.byte	$00
	.byte	$83
	.byte	$00
	.byte	$20
	.byte	$00
	.byte	$84
	.byte	$00
	.byte	$28
	.byte	$00
	.byte	$86
	.byte	$00
	.byte	$28
	.byte	$00
	.byte	$85
	.byte	$00
	.byte	$30
	.byte	$00
	.byte	$87
	.byte	$00
	.byte	$38
	.byte	$00
	.byte	$87
	.byte	$00
	.byte	$00
	.byte	$08
	.byte	$90
	.byte	$00
	.byte	$08
	.byte	$08
	.byte	$91
	.byte	$00
	.byte	$10
	.byte	$08
	.byte	$92
	.byte	$00
	.byte	$18
	.byte	$08
	.byte	$93
	.byte	$00
	.byte	$20
	.byte	$08
	.byte	$94
	.byte	$00
	.byte	$28
	.byte	$08
	.byte	$95
	.byte	$00
	.byte	$30
	.byte	$08
	.byte	$96
	.byte	$00
	.byte	$38
	.byte	$08
	.byte	$97
	.byte	$00
	.byte	$00
	.byte	$10
	.byte	$A0
	.byte	$00
	.byte	$08
	.byte	$10
	.byte	$A1
	.byte	$00
	.byte	$10
	.byte	$10
	.byte	$A2
	.byte	$00
	.byte	$18
	.byte	$10
	.byte	$A3
	.byte	$00
	.byte	$20
	.byte	$10
	.byte	$A4
	.byte	$00
	.byte	$28
	.byte	$10
	.byte	$A5
	.byte	$00
	.byte	$30
	.byte	$10
	.byte	$A6
	.byte	$00
	.byte	$38
	.byte	$10
	.byte	$A7
	.byte	$00
	.byte	$00
	.byte	$18
	.byte	$B0
	.byte	$00
	.byte	$08
	.byte	$18
	.byte	$B1
	.byte	$00
	.byte	$10
	.byte	$18
	.byte	$B2
	.byte	$00
	.byte	$18
	.byte	$18
	.byte	$B3
	.byte	$00
	.byte	$20
	.byte	$18
	.byte	$B4
	.byte	$00
	.byte	$28
	.byte	$18
	.byte	$B5
	.byte	$00
	.byte	$30
	.byte	$18
	.byte	$B6
	.byte	$00
	.byte	$38
	.byte	$18
	.byte	$B7
	.byte	$00
	.byte	$00
	.byte	$20
	.byte	$C0
	.byte	$00
	.byte	$08
	.byte	$20
	.byte	$C1
	.byte	$00
	.byte	$10
	.byte	$20
	.byte	$C2
	.byte	$00
	.byte	$18
	.byte	$20
	.byte	$C3
	.byte	$00
	.byte	$20
	.byte	$20
	.byte	$C4
	.byte	$00
	.byte	$28
	.byte	$20
	.byte	$C5
	.byte	$00
	.byte	$30
	.byte	$20
	.byte	$C6
	.byte	$00
	.byte	$38
	.byte	$20
	.byte	$C7
	.byte	$00
	.byte	$00
	.byte	$28
	.byte	$D0
	.byte	$00
	.byte	$08
	.byte	$28
	.byte	$D1
	.byte	$00
	.byte	$10
	.byte	$28
	.byte	$D2
	.byte	$00
	.byte	$18
	.byte	$28
	.byte	$D3
	.byte	$00
	.byte	$20
	.byte	$28
	.byte	$D4
	.byte	$00
	.byte	$28
	.byte	$28
	.byte	$D5
	.byte	$00
	.byte	$30
	.byte	$28
	.byte	$D6
	.byte	$00
	.byte	$38
	.byte	$28
	.byte	$D7
	.byte	$00
	.byte	$00
	.byte	$30
	.byte	$E0
	.byte	$00
	.byte	$08
	.byte	$30
	.byte	$E1
	.byte	$00
	.byte	$10
	.byte	$30
	.byte	$E2
	.byte	$00
	.byte	$18
	.byte	$30
	.byte	$E3
	.byte	$00
	.byte	$20
	.byte	$30
	.byte	$E4
	.byte	$00
	.byte	$28
	.byte	$30
	.byte	$E5
	.byte	$00
	.byte	$30
	.byte	$30
	.byte	$E6
	.byte	$00
	.byte	$38
	.byte	$30
	.byte	$E7
	.byte	$00
	.byte	$08
	.byte	$40
	.byte	$F0
	.byte	$00
	.byte	$08
	.byte	$38
	.byte	$F1
	.byte	$00
	.byte	$10
	.byte	$38
	.byte	$F2
	.byte	$00
	.byte	$18
	.byte	$38
	.byte	$F3
	.byte	$00
	.byte	$20
	.byte	$38
	.byte	$F4
	.byte	$00
	.byte	$28
	.byte	$38
	.byte	$F5
	.byte	$00
	.byte	$80
_lungs:
	.byte	$01
	.byte	$00
	.byte	$01
	.byte	$FE
	.byte	$00
	.byte	$01
	.byte	$4C
	.byte	$80
	.byte	$81
	.byte	$82
	.byte	$83
	.byte	$84
	.byte	$85
	.byte	$86
	.byte	$87
	.byte	$00
	.byte	$01
	.byte	$17
	.byte	$90
	.byte	$91
	.byte	$92
	.byte	$93
	.byte	$94
	.byte	$95
	.byte	$96
	.byte	$97
	.byte	$00
	.byte	$01
	.byte	$17
	.byte	$A0
	.byte	$A1
	.byte	$A2
	.byte	$A3
	.byte	$A4
	.byte	$A5
	.byte	$A6
	.byte	$A7
	.byte	$00
	.byte	$01
	.byte	$17
	.byte	$B0
	.byte	$B1
	.byte	$B2
	.byte	$B3
	.byte	$B4
	.byte	$B5
	.byte	$B6
	.byte	$B7
	.byte	$00
	.byte	$01
	.byte	$17
	.byte	$C0
	.byte	$C1
	.byte	$C2
	.byte	$C3
	.byte	$C4
	.byte	$C5
	.byte	$C6
	.byte	$C7
	.byte	$00
	.byte	$01
	.byte	$17
	.byte	$D0
	.byte	$D1
	.byte	$D2
	.byte	$D3
	.byte	$D4
	.byte	$D5
	.byte	$D6
	.byte	$D7
	.byte	$00
	.byte	$01
	.byte	$17
	.byte	$E0
	.byte	$E1
	.byte	$E2
	.byte	$E3
	.byte	$E4
	.byte	$E5
	.byte	$E6
	.byte	$E7
	.byte	$00
	.byte	$01
	.byte	$FE
	.byte	$00
	.byte	$01
	.byte	$BD
	.byte	$A0
	.byte	$01
	.byte	$03
	.byte	$20
	.byte	$00
	.byte	$01
	.byte	$04
	.byte	$AA
	.byte	$AA
	.byte	$00
	.byte	$01
	.byte	$05
	.byte	$0A
	.byte	$0A
	.byte	$00
	.byte	$01
	.byte	$19
	.byte	$00
	.byte	$01
	.byte	$00
_paletteBackground:
	.byte	$0F
	.byte	$06
	.byte	$16
	.byte	$26
	.byte	$0F
	.byte	$06
	.byte	$16
	.byte	$26
	.byte	$0F
	.byte	$06
	.byte	$16
	.byte	$26
	.byte	$0F
	.byte	$06
	.byte	$16
	.byte	$26
_paletteSprite:
	.byte	$0F
	.byte	$3D
	.byte	$30
	.byte	$05
	.byte	$0F
	.byte	$3D
	.byte	$30
	.byte	$05
	.byte	$0F
	.byte	$3D
	.byte	$30
	.byte	$05
	.byte	$0F
	.byte	$3D
	.byte	$30
	.byte	$05

; ---------------------------------------------------------------
; void __near__ draw_sprites (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_draw_sprites: near

	.dbg	func, "draw_sprites", "00", extern, "_draw_sprites"

.segment	"CODE"

;
; oam_meta_spr(virusCoordinates.x, virusCoordinates.y, virus);
;
	.dbg	line, "pads.c", 67
	jsr     decsp2
	lda     _virusCoordinates
	ldy     #$01
	sta     (sp),y
	lda     _virusCoordinates+2
	dey
	sta     (sp),y
	lda     #<(_virus)
	ldx     #>(_virus)
	jmp     _oam_meta_spr

	.dbg	line
.endproc

; ---------------------------------------------------------------
; void __near__ movement (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_movement: near

	.dbg	func, "movement", "00", extern, "_movement"

.segment	"CODE"

;
; virusCoordinates.x = initialVirusCoordinates.x + virusPath[get_frame_count()].x;
;
	.dbg	line, "pads.c", 71
	lda     _initialVirusCoordinates
	ldx     _initialVirusCoordinates+1
	jsr     pushax
	jsr     _get_frame_count
	jsr     aslax2
	clc
	adc     #<(_virusPath)
	sta     ptr1
	txa
	adc     #>(_virusPath)
	sta     ptr1+1
	ldy     #$01
	lda     (ptr1),y
	tax
	dey
	lda     (ptr1),y
	jsr     tosaddax
	sta     _virusCoordinates
	stx     _virusCoordinates+1
;
; virusCoordinates.y = initialVirusCoordinates.y + virusPath[get_frame_count()].y;
;
	.dbg	line, "pads.c", 72
	lda     _initialVirusCoordinates+2
	ldx     _initialVirusCoordinates+2+1
	jsr     pushax
	jsr     _get_frame_count
	jsr     aslax2
	clc
	adc     #<(_virusPath)
	sta     ptr1
	txa
	adc     #>(_virusPath)
	sta     ptr1+1
	ldy     #$03
	lda     (ptr1),y
	tax
	dey
	lda     (ptr1),y
	jsr     tosaddax
	sta     _virusCoordinates+2
	stx     _virusCoordinates+2+1
;
; }
;
	.dbg	line, "pads.c", 73
	rts

	.dbg	line
.endproc

; ---------------------------------------------------------------
; void __near__ main (void)
; ---------------------------------------------------------------

.segment	"CODE"

.proc	_main: near

	.dbg	func, "main", "00", extern, "_main"

.segment	"CODE"

;
; ppu_off(); // screen off
;
	.dbg	line, "pads.c", 41
	jsr     _ppu_off
;
; pal_bg(paletteBackground);
;
	.dbg	line, "pads.c", 44
	lda     #<(_paletteBackground)
	ldx     #>(_paletteBackground)
	jsr     _pal_bg
;
; pal_spr(paletteSprite);
;
	.dbg	line, "pads.c", 45
	lda     #<(_paletteSprite)
	ldx     #>(_paletteSprite)
	jsr     _pal_spr
;
; bank_spr(1);
;
	.dbg	line, "pads.c", 49
	lda     #$01
	jsr     _bank_spr
;
; vram_adr(NAMETABLE_A);
;
	.dbg	line, "pads.c", 51
	ldx     #$20
	lda     #$00
	jsr     _vram_adr
;
; vram_unrle(lungs);
;
	.dbg	line, "pads.c", 53
	lda     #<(_lungs)
	ldx     #>(_lungs)
	jsr     _vram_unrle
;
; ppu_on_all();
;
	.dbg	line, "pads.c", 56
	jsr     _ppu_on_all
;
; movement();
;
	.dbg	line, "pads.c", 59
L0002:	jsr     _movement
;
; draw_sprites();
;
	.dbg	line, "pads.c", 60
	jsr     _draw_sprites
;
; ppu_wait_nmi();
;
	.dbg	line, "pads.c", 61
	jsr     _ppu_wait_nmi
;
; while (1) {
;
	.dbg	line, "pads.c", 58
	jmp     L0002

	.dbg	line
.endproc

